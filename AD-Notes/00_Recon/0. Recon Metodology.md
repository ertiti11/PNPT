# Л Metodolog铆a de Enumeraci贸n en Pentesting AD

Este documento sirve como gu铆a paso a paso para la enumeraci贸n en entornos Windows / Active Directory.  
Incluye fases, objetivos, comandos y herramientas alternativas.

---

## 1锔 Reconocimiento inicial

### Descubrimiento de hosts

```bash
nmap -sn 10.10.10.0/24
fping -a -g 10.10.10.0/24 2>/dev/null
```


```bash
nmap -p- --min-rate 10000 -T4 -oA fullscan 10.10.10.100
```



### Escaneo de puertos

```bash
nmap -sCV -p- --open --min-rate 5000  -oA fullscan 10.10.10.100 -v
incursore -h 10.10.10.100 -t all
```



## 2锔 Enumeraci贸n de SMB

### Shares disponibles

```bash
smbclient -L //10.10.10.100 -N 
smbmap -H 10.10.10.100
crackmapexec smb 10.10.10.100 -u '' -p '' --shares
enum4linux -h 10.10.10.100
```
### Conexi贸n a un share

```bash
smbclient //10.10.10.100/Users -U "dominio\usuario%contrase帽a"
```

### Herramientas autom谩ticas

```bash
enum4linux-ng -A 10.10.10.100
```

## 3锔 Enumeraci贸n RPC

### Conexi贸n an贸nima

```bash
rpcclient -U "" -N 10.10.10.100
```

### Comandos importantes de rpcclient

```bash
enumdomusers
enumdomgroups
queryuser <RID> 
getdompwinfo
```

## 4锔 Enumeraci贸n LDAP

### Usuarios activos

```bash
ldapsearch -x -H ldap://10.10.10.100 \   -D "usuario@dominio" -w 'contrase帽a' \   -b "dc=dominio,dc=local" \   "(&(objectCategory=person)(objectClass=user)(!(useraccountcontrol:1.2.840.113556.1.4.803:=2)))" sAMAccountName
```
### SPNs para Kerberoasting

`ldapsearch -x -H ldap://10.10.10.100 \   -D "usuario@dominio" -w 'contrase帽a' \   -b "dc=dominio,dc=local" "(servicePrincipalName=*)" servicePrincipalName`